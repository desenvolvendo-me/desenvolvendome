<div class="bg-perfil">
</div>
<div class="container container-profile">
  <div class="center-block">
    <div class="row">
      <div class="col-md-12">
        <div class="image-container">
          <% if @user %>
            <%= image_tag @user.avatar, size: "150x150", class: "profile-image" %>
          <% else %>
            <%= image_tag "user.png", size: "150x150", class: "profile-image" %>
          <% end %>
          <p class="score-container">
            <span class="score-title">Score</span>
            <% if @user.try(:profile) %>
              <span class="score-value btn btn-primary"><%= @user.profile.score.to_f %> de 8</span>
            <% else %>
              <span class="score-value btn btn-primary">?</span>
            <% end %>
          </p>
          <div class="progress">
            <% if @user.try(:profile) %>
              <div class="progress-bar" role="progressbar" style="width: <%= progress_bar(@user) %>%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"><%= number_to_percentage(progress_bar(@user), precision: 0) %></div>
            <% end %>
          </div>
        </div>
        <div class="profile-info">
          <p class="name"><%= @user.try(:name) %></p>
          <p class="login">
            <a href="https://github.com/<%= @user.try(:login) %>" title="<%= @user.try(:login) %>" target="_new">@<%= @user.try(:login) %></a>
          </p>
          <p class="bio"><span><%= @user.try(:bio) %></span></p>
        </div>
      </div>
    </div>
    <% if @user.try(:profile) %>
      <% if progress_bar(@user) == 100 %>
        <hr class="featurette-divider">
        <div class="row">
          <div class="col-md-6">
            <%= react_component("VisitChatConhecimentos", {data: result_knowledges(@user.profile)}) %>
          </div>
          <div class="col-md-6">
            <%= react_component("VisitChatAnalise", {data: result_evaluations(@user.profile)}) %>
          </div>
          <div class="col-md-6">
            Legenda
            <ul>
              <li>
                Tecnologia que mais pratica e conhece
              </li>
            </ul>
          </div>
          <div class="col-md-6">
            Legenda
            <ul>
              <li>
                Programador: demonstra o quanto conhece programação
              </li>
              <li>
                Disciplinador: demonstra o quanto pratica programação
              </li>
              <li>
                Colaborador: demonstra o quanto criar projetos úteis
              </li>
              <li>
                Influenciador: demonstra o quanto cria projetos interessantes
              </li>
            </ul>
          </div>
        </div>
        <hr class="featurette-divider">
        <div class="row">
          <div class="col-lg-12 text-center">
            <h5>Seu Score é <%= @user.profile.score.to_f %> de 8. Achou baixo?</h5>
            <p>Sabia como melhorar e entenda sua importãncia</p>
            <p><%= link_to "Clique Aqui", new_interest_path, class: "btn btn-lg btn-primary" %></p>
          </div>
        </div>
      <% end %>
    <% end %>
  </div>
  <hr class="featurette-divider">

  <div class="row">
    <div class="col-md-4">
      <div class="list-group">
        <a href="#" class="list-group-item list-group-item-action flex-column align-items-start">
          <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1">Menos de 50 commits</h5>
          </div>
          <% if @user %>
            <small class="text-muted">Você tem <%= @user.repositories.where("commits_count < 50").count %>repositórios
            </small>
          <% else %>
            <small class="text-muted">Você tem 0 repositórios</small>
          <% end %>
        </a>
      </div>
    </div>
    <div class="col-md-4">
      <div class="list-group">
        <a href="#" class="list-group-item list-group-item-action flex-column align-items-start">
          <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1">Entre 50 e 100 commits</h5>
          </div>
          <% if @user %>
            <small class="text-muted">Você
              tem <%= @user.repositories.where("commits_count > 50 and commits_count < 100").count %> repositórios
            </small>
          <% else %>
            <small class="text-muted">Você tem 0 repositórios</small>
          <% end %>
        </a>
      </div>
    </div>
    <div class="col-md-4">
      <div class="list-group">
        <a href="#" class="list-group-item list-group-item-action flex-column align-items-start">
          <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1">Mais de 100 commits</h5>
          </div>
          <% if @user %>
            <small class="text-muted">Você tem <%= @user.repositories.where("commits_count > 100").count %>repositórios
            </small>
          <% else %>
            <small class="text-muted">Você tem 0 repositórios</small>
          <% end %>
        </a>
      </div>
    </div>
  </div>

</div>
