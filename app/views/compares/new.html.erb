<div class="container container-intests-new">
  <div class="center-block">
    <div class="col-md-12 mx-auto">
      <div class="card card-signin">
        <div class="col-md-12 mx-auto">
          <%= search_form_for @q, url: compare_new_path, class: "simple_form form-inline" do |f| %>
            <div class="row">
              <%= f.search_field :name_cont, placeholder: "Nome", class: "form-control mr-2" %>
              <%= f.search_field :login_cont, placeholder: "Login Github", class: "form-control mr-2" %>
              <%= f.select :profile_evaluation_evaluation_type_eq,
                           Evaluation.evaluation_types.to_a.map {|w| [enum_i18n(Evaluation, "evaluation_type", w[0]), w[1]]}, {:include_blank => true}, class: "form-control mr-2" %>
              <%= f.select :profile_evaluation_level_eq, [1, 2, 3, 4, 5, 6, 7, 8, 9, 10], {:include_blank => true}, class: "form-control mr-2" %>
              <%= f.submit "Pesquisar", class: "form-control mr-2 btn btn-success" %>
              <%= link_to "Cancelar", request.path, class: "form-control mr-2 btn btn-info" %>
            </div>
          <% end %>
        </div>
      </div>
      <hr class="featurette-divider">
      <div class="row justify-content-center">
        <%= paginate @users %>
      </div>
      <div class="row justify-content-center">
        <%= page_entries_info @users %>
      </div>
      <div class="row">
        <% @users.where.not(id: current_user.id).each do |user| %>
          <div class="col-md-3 text-center">
            <div class="list-group-item list-group-item-action flex-column align-items-start">
              <%= link_to user_path(user.login) do %>
                <div class="justify-content-between">
                  <% if user %>
                    <%= image_tag user.avatar, size: "150x150", class: "profile-image rounded-circle" %>
                    <div class="h4 text-center"><%= user.try(:name) ? truncate(user.try(:name), length: 20) : "?" %></div>
                    <div class="h6 text-center">
                      <a href="https://github.com/<%= user.try(:login) %>" title="<%= user.try(:login) %>" target="_new"><%= user.try(:login) ? "@#{user.try(:login)}" : "?" %></a>
                    </div>
                  <% else %>
                    <%= image_tag "user.png", size: "150x150", class: "profile-image rounded-circle" %>
                  <% end %>
                  <div class="h4 text-center"><%= user.profile.try(:evaluation).try(:evaluation_type) ? enum_i18n(Evaluation, "evaluation_type", user.profile.try(:evaluation).try(:evaluation_type)) : "?" %></div>
                  <div class="h6 text-center"><%= user.profile.try(:evaluation).try(:level) ? "#{user.profile.try(:evaluation).try(:level)}º nível" : "?" %></div>
                </div>
              <% end %>
              <% if current_user %>
                <%= link_to compare_path(user: current_user.login, compared: user.login), class: "btn btn-warning" do %>
                  <i class="fas fa-not-equal"> Comparar</i>
                <% end %>
              <% end %>
            </div>
            <br>
          </div>
        <% end %>
      </div>
      <div class="row justify-content-center">
        <%= paginate @users %>
      </div>
    </div>
  </div>
</div>